{"version":3,"file":"CartSummary-CEjkj6oR.js","sources":["../../src/components/CartSummary.tsx"],"sourcesContent":["import React from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useCartStore } from '../store/cartStore';\nimport { useSettingsStore } from '../store/settingsStore';\n\nexport const CartSummary: React.FC = () => {\n  const { items, removeItem, updateQuantity, getTotal } = useCartStore();\n  const { settings } = useSettingsStore();\n  const navigate = useNavigate();\n\n  React.useEffect(() => {\n    // Fetch settings when component mounts to ensure proper total calculation\n    useSettingsStore.getState().fetchSettings();\n  }, []);\n\n  React.useEffect(() => {\n    if (items.length === 0) {\n      navigate('/menu');\n    }\n  }, [items.length, navigate]);\n\n  const getOptionTitle = (optionId: string) => {\n    return settings?.productOptions.find(opt => opt.id === optionId)?.title;\n  };\n\n  const getItemTotal = (item: typeof items[0]) => {\n    const basePrice = item.product.price * item.quantity;\n    const optionPrice = item.selectedOption\n      ? (settings?.productOptions.find(opt => opt.id === item.selectedOption)?.price || 0) * item.quantity\n      : 0;\n    return basePrice + optionPrice;\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto\">\n      <h2 className=\"text-2xl font-bold mb-6\">Your Cart</h2>\n\n      <div className=\"bg-white shadow-md rounded-lg p-6 mb-8\">\n        {items.map((item) => (\n          <div key={`${item.product.id}-${item.selectedOption || 'no-option'}`} className=\"flex justify-between mb-3 pb-3 border-b\">\n            <div>\n              <div className=\"flex items-baseline gap-2\">\n                <p className=\"font-medium\">{item.product.name}</p>\n                <p className=\"text-sm text-gray-600\">£{item.product.price.toFixed(2)} each</p>\n              </div>\n              {item.selectedOption && (\n                <p className=\"text-sm text-gray-600\">\n                  {getOptionTitle(item.selectedOption)} \n                  (+£{settings?.productOptions.find(opt => opt.id === item.selectedOption)?.price.toFixed(2)})\n                </p>\n              )}\n              <div className=\"flex items-center mt-2\">\n                <button\n                  onClick={() => updateQuantity(item.product.id, item.selectedOption, Math.max(item.quantity - 1, 1))}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\n                  aria-label=\"Decrease quantity\"\n                >\n                  -\n                </button>\n                <span className=\"mx-3 min-w-[2rem] text-center\">{item.quantity}</span>\n                <button\n                  onClick={() => updateQuantity(item.product.id, item.selectedOption, item.quantity + 1)}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200\"\n                  aria-label=\"Increase quantity\"\n                >\n                  +\n                </button>\n              </div>\n            </div>\n            <div className=\"flex flex-col items-end justify-between\">\n              <p className=\"font-medium\">£{getItemTotal(item).toFixed(2)}</p>\n              <button\n                onClick={() => removeItem(item.product.id, item.selectedOption)}\n                className=\"text-sm text-red-500 hover:text-red-700\"\n              >\n                Remove\n              </button>\n            </div>\n          </div>\n        ))}\n\n        <div className=\"mt-4 pt-4 border-t\">\n          <div className=\"flex justify-between text-lg font-bold\">\n            <span>Total:</span>\n            <span>£{getTotal().toFixed(2)}</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"flex gap-4\">\n        <button\n          onClick={() => navigate('/menu')}\n          className=\"flex-1 bg-gray-200 text-gray-700 py-4 px-6 rounded-lg text-lg font-semibold hover:bg-gray-300 transition-colors\"\n        >\n          Continue Shopping\n        </button>\n        <button\n          onClick={() => navigate('/collection-time')}\n          className=\"flex-1 bg-blue-600 text-white py-4 px-6 rounded-lg text-lg font-semibold hover:bg-blue-700 transition-colors\"\n        >\n          Select Collection Time\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default CartSummary;"],"names":["CartSummary","items","removeItem","updateQuantity","getTotal","useCartStore","settings","useSettingsStore","navigate","useNavigate","React","getOptionTitle","optionId","_a","opt","getItemTotal","item","basePrice","optionPrice","jsxs","jsx"],"mappings":"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"}