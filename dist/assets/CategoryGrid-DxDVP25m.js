import{u as p,a as x,j as e}from"./index-YCAMCxzv.js";import{R as o}from"./vendor-react-S76kyUnC.js";import"./vendor-utils-BGzRgZPY.js";import"./vendor-firebase-DU3MYe4I.js";const b=({product:t})=>{const[l,n]=o.useState(""),[a,r]=o.useState(!1),d=p(s=>s.addItem),{settings:m}=x();o.useEffect(()=>{x.getState().fetchSettings()},[]);const c=o.useMemo(()=>!m||!t.availableOptions?[]:m.productOptions.filter(s=>{var u;return(u=t.availableOptions)==null?void 0:u.includes(s.id)}),[t.availableOptions,m]),g=()=>{d({product:t,quantity:1,selectedOption:l||void 0}),r(!0),setTimeout(()=>{r(!1)},2e3)},i=c.find(s=>s.id===l),h=t.price+((i==null?void 0:i.price)||0),f=c&&c.length>0;return e.jsxs("div",{className:"bg-white rounded-lg shadow-md p-3 flex flex-col h-full relative",children:[a&&e.jsx("div",{className:"absolute top-2 right-2 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-fade-in-out z-10",children:"Added to cart!"}),e.jsx("div",{className:"relative w-full h-[150px] mb-2",children:e.jsx("img",{src:t.image,alt:t.name,width:200,height:150,className:"absolute inset-0 w-full h-full object-cover rounded-lg",loading:"lazy"})}),e.jsxs("div",{className:"flex flex-col flex-grow",children:[e.jsx("h3",{className:"text-sm font-semibold mb-1 line-clamp-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:t.description}),e.jsxs("div",{className:"mt-auto space-y-2",children:[e.jsxs("p",{className:"text-sm font-bold",children:["£",h.toFixed(2),i&&e.jsxs("span",{className:"text-xs font-normal text-gray-600 ml-1",children:["(Base: £",t.price.toFixed(2)," + ",i.title,": £",i.price.toFixed(2),")"]})]}),f&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"block text-sm font-semibold text-blue-700",children:"Select Options:"}),e.jsxs("select",{value:l,onChange:s=>n(s.target.value),className:"w-full p-2 text-sm border-2 border-blue-100 rounded bg-blue-50 focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50",children:[e.jsx("option",{value:"",children:"Choose an option"}),c.map(s=>e.jsxs("option",{value:s.id,className:"font-medium",children:[s.title," (+£",s.price.toFixed(2),")"]},s.id))]})]}),e.jsx("button",{onClick:g,className:"w-full bg-blue-600 text-white py-2 px-2 rounded text-sm font-semibold hover:bg-blue-700 transition-colors",children:"Add to Cart"})]})]})]})},y=({products:t,category:l})=>{o.useEffect(()=>{x.getState().fetchSettings()},[]);const n=o.useMemo(()=>(console.log("All products:",t),console.log("Current category:",l),t.filter(a=>{const r=a.category.toLowerCase().trim(),d=l.toLowerCase().trim();return console.log("Product category:",r),console.log("Comparing with:",d),r===d})),[t,l]);return console.log("Filtered products:",n),n.length===0?e.jsx("div",{className:"text-center py-12",children:e.jsxs("p",{className:"text-gray-600",children:["No products available in ",l,"."]})}):e.jsx("div",{className:"mt-[50px]",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:n.map(a=>e.jsx(b,{product:a},a.id))})})};export{y as default};
//# sourceMappingURL=CategoryGrid-DxDVP25m.js.map
