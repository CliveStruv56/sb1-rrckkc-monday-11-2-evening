{"version":3,"file":"CategoryGrid-DxDVP25m.js","sources":["../../src/components/ProductCard.tsx","../../src/components/CategoryGrid.tsx"],"sourcesContent":["import React from 'react';\nimport { Product } from '../types';\nimport { useCartStore } from '../store/cartStore';\nimport { useSettingsStore } from '../store/settingsStore';\n\ninterface ProductCardProps {\n  product: Product;\n}\n\nexport const ProductCard: React.FC<ProductCardProps> = ({ product }) => {\n  const [selectedOptionId, setSelectedOptionId] = React.useState<string>('');\n  const [showAddedMessage, setShowAddedMessage] = React.useState(false);\n  const addItem = useCartStore((state) => state.addItem);\n  const { settings } = useSettingsStore();\n\n  // Fetch settings when component mounts\n  React.useEffect(() => {\n    useSettingsStore.getState().fetchSettings();\n  }, []);\n\n  const availableOptions = React.useMemo(() => {\n    if (!settings || !product.availableOptions) return [];\n    return settings.productOptions.filter(option => \n      product.availableOptions?.includes(option.id)\n    );\n  }, [product.availableOptions, settings]);\n\n  const handleAddToCart = () => {\n    addItem({\n      product,\n      quantity: 1,\n      selectedOption: selectedOptionId || undefined\n    });\n    \n    // Show the added message\n    setShowAddedMessage(true);\n    \n    // Hide the message after 2 seconds\n    setTimeout(() => {\n      setShowAddedMessage(false);\n    }, 2000);\n  };\n\n  const selectedOption = availableOptions.find(opt => opt.id === selectedOptionId);\n  const totalPrice = product.price + (selectedOption?.price || 0);\n  const hasOptions = availableOptions && availableOptions.length > 0;\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-md p-3 flex flex-col h-full relative\">\n      {showAddedMessage && (\n        <div className=\"absolute top-2 right-2 bg-green-500 text-white px-3 py-1 rounded-full text-sm animate-fade-in-out z-10\">\n          Added to cart!\n        </div>\n      )}\n      \n      <div className=\"relative w-full h-[150px] mb-2\">\n        <img \n          src={product.image} \n          alt={product.name}\n          width={200}\n          height={150} \n          className=\"absolute inset-0 w-full h-full object-cover rounded-lg\"\n          loading=\"lazy\"\n        />\n      </div>\n      \n      <div className=\"flex flex-col flex-grow\">\n        <h3 className=\"text-sm font-semibold mb-1 line-clamp-1\">{product.name}</h3>\n        <p className=\"text-xs text-gray-600 mb-2 line-clamp-2\">{product.description}</p>\n        \n        <div className=\"mt-auto space-y-2\">\n          <p className=\"text-sm font-bold\">\n            £{totalPrice.toFixed(2)}\n            {selectedOption && (\n              <span className=\"text-xs font-normal text-gray-600 ml-1\">\n                (Base: £{product.price.toFixed(2)} + {selectedOption.title}: £{selectedOption.price.toFixed(2)})\n              </span>\n            )}\n          </p>\n\n          {hasOptions && (\n            <div className=\"space-y-1\">\n              <label className=\"block text-sm font-semibold text-blue-700\">\n                Select Options:\n              </label>\n              <select\n                value={selectedOptionId}\n                onChange={(e) => setSelectedOptionId(e.target.value)}\n                className=\"w-full p-2 text-sm border-2 border-blue-100 rounded bg-blue-50 focus:border-blue-300 focus:ring focus:ring-blue-200 focus:ring-opacity-50\"\n              >\n                <option value=\"\">Choose an option</option>\n                {availableOptions.map((option) => (\n                  <option key={option.id} value={option.id} className=\"font-medium\">\n                    {option.title} (+£{option.price.toFixed(2)})\n                  </option>\n                ))}\n              </select>\n            </div>\n          )}\n\n          <button\n            onClick={handleAddToCart}\n            className=\"w-full bg-blue-600 text-white py-2 px-2 rounded text-sm font-semibold hover:bg-blue-700 transition-colors\"\n          >\n            Add to Cart\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};","import React from 'react';\nimport { Product, Category } from '../types';\nimport { ProductCard } from './ProductCard';\nimport { useSettingsStore } from '../store/settingsStore';\n\ninterface CategoryGridProps {\n  products: Product[];\n  category: Category;\n}\n\nconst CategoryGrid: React.FC<CategoryGridProps> = ({ products, category }) => {\n  React.useEffect(() => {\n    useSettingsStore.getState().fetchSettings();\n  }, []);\n\n  const filteredProducts = React.useMemo(() => {\n    // Log for debugging\n    console.log('All products:', products);\n    console.log('Current category:', category);\n    \n    return products.filter((product) => {\n      const normalizedProductCategory = product.category.toLowerCase().trim();\n      const normalizedCategory = category.toLowerCase().trim();\n      \n      // Log for debugging\n      console.log('Product category:', normalizedProductCategory);\n      console.log('Comparing with:', normalizedCategory);\n      \n      return normalizedProductCategory === normalizedCategory;\n    });\n  }, [products, category]);\n\n  console.log('Filtered products:', filteredProducts);\n\n  if (filteredProducts.length === 0) {\n    return (\n      <div className=\"text-center py-12\">\n        <p className=\"text-gray-600\">No products available in {category}.</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"mt-[50px]\">\n      <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n        {filteredProducts.map((product) => (\n          <ProductCard key={product.id} product={product} />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default CategoryGrid;"],"names":["ProductCard","product","selectedOptionId","setSelectedOptionId","React","showAddedMessage","setShowAddedMessage","addItem","useCartStore","state","settings","useSettingsStore","availableOptions","option","_a","handleAddToCart","selectedOption","opt","totalPrice","hasOptions","jsxs","jsx","e","CategoryGrid","products","category","filteredProducts","normalizedProductCategory","normalizedCategory"],"mappings":"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"}